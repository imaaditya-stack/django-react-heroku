(this["webpackJsonpmedical-store"]=this["webpackJsonpmedical-store"]||[]).push([[0],{180:function(e,t,r){},305:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(19),c=r.n(a),i=(r(180),r(36)),s=r(23),o=r(2),d=r(340),l=r(361),u=r(343),j=r(37),b=r(63),p=r(7),O=r.n(p),m=r(16),h="AUTH_CHECK",x="AUTH_ERROR",v="LOGOUT",f="LOAD_STORES",y="STORES_ERROR",g="STORE_TYPES",_="STORE_TYPES_ERROR",E="ADD_STORE",S="DELETE_STORE",R="DELETE_STORE_ERROR",w="UPDATE_STORE",C="LOAD_MEDS",M="MEDS_ERROR",T="ADD_MEDS",D="MED_TYPES",N="MED_TYPES_ERROR",k="DELETE_MED",L="DELETE_MED_ERROR",A="UPDATE_MED",G="SET_ALERT",q="REMOVE_ALERT",U=function(){var e;return null===(e=localStorage)||void 0===e?void 0:e.AUTH},I=r(75),B=r.n(I),F=B.a.create({baseURL:"http://localhost:8000/api/",headers:{"Content-Type":"application/json"}});F.interceptors.request.use((function(e){var t=U();return t?e.headers.Authorization="Token ".concat(t):delete e.headers.Authorization,e}),(function(e){return Promise.reject(e)})),F.interceptors.response.use((function(e){return e}),(function(e){if(e.response)return 401===e.response.status&&localStorage.clear(),Promise.reject(e)}));var P=r(365),V=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1500;return function(n){var a=Object(P.a)();n({type:G,payload:{msg:e,type:t,id:a}}),setTimeout((function(){return n({type:q,payload:a})}),r)}},H=r(15),Y=r(20),z=Y.c().shape({username:Y.d().required(),password:Y.d().required()}),W=/^((\\+[1-9]{1,4}[ \\-]*)|(\\([0-9]{2,3}\\)[ \\-]*)|([0-9]{2,4})[ \\-]*)*?[0-9]{3,4}?[ \\-]*[0-9]{3,4}?$/,X=function(e){var t=e?{}:{password:Y.d().required().min(6).max(10)};return Y.c().shape(Object(o.a)(Object(o.a)({store_name:Y.d().required("Store Name is a required field").min(3).max(60),username:Y.d().required("Username is a required field").min(3).max(45)},t),{},{store_email_id:Y.d().email("Invalid Email").notRequired(),mobile_number:Y.d().matches(W,{message:"Phone number is not valid",excludeEmptyString:!0}),store_registration_no:Y.d().matches(/^(|.{5,})$/,"Registration Number must be at least 5 characters").max(60,"Registration Number must not be more than 60 characters").nullable(),store_license:Y.d().required("Store License is a required field").nullable(),store_type_id:Y.d().required("Store Type is a required field"),address_1:Y.d().required("Address 1 is a required field"),address_2:Y.d().notRequired()}))},$=new Date;$.setFullYear($.getFullYear()+2);var J=Y.c().shape({medicine_name:Y.d().required("Medicine name is a required field").min(3,"Medicine name must be at least 5 characters").max(60,"Medicine name must not be more than 60 characters"),medicine_price:Y.b().required("Medicine price is a required field").min(1,"Medicine price must be greater than or equal to 1").max(999.99,"Medicine price must be less than or equal to 999.99").nullable(!0).transform((function(e){return isNaN(e)?void 0:e})),medicine_details:Y.d().matches(/^(|.{10,})$/,"Medicine details must have atleast 10 characters").max(100,"Medicine details must not be more than 60 characters").nullable(),medicine_quantity:Y.b().integer("Medicine quantity must be an integer").min(1).max(99).nullable(!0).transform((function(e){return isNaN(e)?void 0:e})),medicine_type_id:Y.d().required("Medicine type is a required field"),store_id:Y.d().required("Store is a required field"),medicine_expiry_date:Y.a().required().min($,"Expiry date should be atleast 2 years from today").nullable().typeError("Invalid expiry date")}),K=r(1),Q=function(e){var t=e.error;return Object(K.jsx)("span",{className:"text-danger",children:t})},Z=r(101),ee=r.n(Z),te=r(363),re=r(4),ne=r.n(re);te.a.propTypes={alerts:ne.a.arrayOf(ne.a.shape({msg:ne.a.string,type:ne.a.string,id:ne.a.number}))};var ae=function(e){var t=e.alerts;return null===t||void 0===t?void 0:t.map((function(e){return Object(K.jsx)(te.a,{variant:e.type,children:Object(K.jsx)("span",{children:e.msg})},e.id)}))},ce=function(){var e,t,r=Object(H.c)((function(e){return e.alertReducer}))||[],n=Object(s.g)(),a=Object(H.b)(),c=Object(j.d)({resolver:Object(b.a)(z)}),i=c.register,p=c.handleSubmit,x=c.formState.errors;return Object(K.jsxs)(d.a,{className:"login_container",children:[Object(K.jsx)("center",{children:Object(K.jsx)(ee.a,{})}),Object(K.jsx)("h1",{children:"Medical Store Management"}),Object(K.jsxs)(d.a,{className:"form_container",children:[Object(K.jsx)(ae,{alerts:r}),Object(K.jsxs)(l.a,{onSubmit:p((function(e){a(function(e,t){return function(){var r=Object(m.a)(O.a.mark((function r(n){var a;return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,F.post("store/login/",e);case 3:c=r.sent.data.token,localStorage.setItem("AUTH",c),n({type:h}),t.push("/stores"),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),r.t0.response&&404===r.t0.response.status&&n(V(null===(a=r.t0.response.data)||void 0===a?void 0:a.MSG,"danger"));case 12:case"end":return r.stop()}var c}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()}(e,n))})),children:[Object(K.jsxs)(l.a.Group,{className:"mb-3",controlId:"formBasicUsername",children:[Object(K.jsx)(l.a.Label,{children:"Username"}),Object(K.jsx)(l.a.Control,Object(o.a)({type:"text",placeholder:"Enter username"},i("username"))),Object(K.jsx)(Q,{error:null===(e=x.username)||void 0===e?void 0:e.message})]}),Object(K.jsxs)(l.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(K.jsx)(l.a.Label,{children:"Password"}),Object(K.jsx)(l.a.Control,Object(o.a)({type:"password",placeholder:"Password"},i("password"))),Object(K.jsx)(Q,{error:null===(t=x.password)||void 0===t?void 0:t.message})]}),Object(K.jsx)("center",{children:Object(K.jsx)(u.a,{type:"submit",children:"Login"})})]})]})]})},ie=function(){return function(){var e=Object(m.a)(O.a.mark((function e(t){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.get("medicine/");case 3:r=e.sent,t({type:C,payload:r.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:M});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},se=function(e,t,r){return function(){var t=Object(m.a)(O.a.mark((function t(n){var a,c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:k,payload:e}),t.prev=1,t.next=4,F.delete("medicine/",{data:e});case 4:c=t.sent,n(V(null===(a=c.data)||void 0===a?void 0:a.MSG,"success")),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),t.t0&&(n({type:L,payload:r}),n(V("Operation Failed !","danger")));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},oe=r(351),de=r(347),le=r(348),ue=r(349),je=r(109),be=r(350),pe=r(362),Oe=r(344),me=r(364),he=r(345),xe=r(346),ve=r(166),fe=r.n(ve),ye=r(165),ge=r.n(ye),_e=[{title:"Logout",icon:Object(K.jsx)(ge.a,{}),href:"/",canClick:!0},{title:"Manage Store",icon:Object(K.jsx)(fe.a,{}),href:"/stores"},{title:"Manage Medicine",icon:Object(K.jsx)(ee.a,{}),href:"/medicines"}],Ee=function(){var e=Object(H.b)(),t=Object(s.g)(),r=function(){e(function(e){return function(){var t=Object(m.a)(O.a.mark((function t(r){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F.get("store/logout/");case 3:r({type:v}),localStorage.clear(),e.push("/"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),t.t0.response&&console.log(t.t0.response);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(t))};return Object(K.jsx)(K.Fragment,{children:Object(K.jsx)(Oe.a,{children:_e.map((function(e){return e.canClick?Object(K.jsxs)(me.a,{button:!0,onClick:r,children:[Object(K.jsx)(he.a,{children:e.icon}),Object(K.jsx)(xe.a,{primary:e.title})]},e.title):Object(K.jsxs)(me.a,{button:!0,component:i.b,to:e.href,children:[Object(K.jsx)(he.a,{children:e.icon}),Object(K.jsx)(xe.a,{primary:e.title})]},e.title)}))})})},Se=function(e){return function(t){return function(r){var n=we();return Object(K.jsx)(K.Fragment,{children:Object(K.jsxs)("div",{className:n.root,children:[Object(K.jsx)(de.a,{}),Object(K.jsx)(le.a,{position:"fixed",className:n.appBar,children:Object(K.jsx)(ue.a,{children:Object(K.jsx)(je.a,{variant:"h6",noWrap:!0,children:e.title})})}),Object(K.jsxs)(pe.a,{className:n.drawer,variant:"permanent",classes:{paper:n.drawerPaper},anchor:"left",children:[Object(K.jsx)("div",{className:n.toolbar}),Object(K.jsx)(be.a,{}),Object(K.jsx)(Ee,{})]}),Object(K.jsxs)("main",{className:n.content,children:[Object(K.jsx)("div",{className:n.toolbar}),Object(K.jsx)(t,Object(o.a)({},r))]})]})})}}},Re=240,we=Object(oe.a)((function(e){return{root:{display:"flex"},appBar:{width:"calc(100% - ".concat(Re,"px)"),marginLeft:Re,backgroundColor:"#0364C0"},drawer:{width:Re,flexShrink:0},drawerPaper:{width:Re},toolbar:e.mixins.toolbar,content:{flexGrow:1,backgroundColor:e.palette.background.default,padding:e.spacing(3)}}})),Ce=function(e,t){return{title:"Action",render:function(r){return Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(u.a,{onClick:function(){return e(r)},style:{marginRight:"20px"},children:"Edit"}),Object(K.jsx)(u.a,{className:"red-btn",onClick:function(){return t(r)},children:"Delete"})]})}}},Me=function(e,t){return[Ce(e,t),{title:"Medicine Name",render:function(e){return Object(K.jsx)("span",{children:e.medicine_name})}},{title:"Medicine Price",render:function(e){return Object(K.jsx)("span",{children:e.medicine_price})}},{title:"Expiry Date",render:function(e){return Object(K.jsx)("span",{children:e.medicine_expiry_date})}},{title:"Medicine Type",render:function(e){return Object(K.jsx)("span",{children:e.medicine_type_id_label})}},{title:"Store Name",render:function(e){return Object(K.jsx)("span",{children:e.store_id_label})}}]},Te=r(26),De=r(352),Ne=function(){return Object(K.jsx)("div",{className:"text-center",children:Object(K.jsx)(De.a,{animation:"grow",variant:"primary",size:"lg"})})},ke=r(168),Le=r.n(ke),Ae=r(10),Ge=r(354),qe=r(357),Ue=r(358),Ie=r(353),Be=r(355),Fe=r(356),Pe=r(307),Ve=r(360),He=function(e){var t=e.show,r=e.handleClose,n=e.handleDelete;return Object(K.jsx)(K.Fragment,{children:Object(K.jsxs)(Ve.a,{show:t,onHide:r,centered:!0,children:[Object(K.jsx)(Ve.a.Header,{closeButton:!0,children:Object(K.jsx)(Ve.a.Title,{children:"Warning"})}),Object(K.jsx)(Ve.a.Body,{children:"Are you sure you want to delete the record?"}),Object(K.jsxs)(Ve.a.Footer,{children:[Object(K.jsx)(u.a,{variant:"secondary",onClick:r,children:"No"}),Object(K.jsx)(u.a,{className:"red-btn",onClick:n,children:"Confirm"})]})]})})},Ye=Object(Ae.a)((function(e){return{head:{backgroundColor:"#0364C0",color:e.palette.common.white,fontSize:16},body:{fontSize:14}}}))(Ue.a),ze=Object(Ae.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover}}}}))(Fe.a),We=Object(oe.a)({table:{minWidth:700}}),Xe=function(e){var t=e.cols,r=e.data,n=e.handleDelete,a=e.show,c=e.handleClose,i=We();return Object(K.jsxs)(Ie.a,{component:Pe.a,children:[Object(K.jsxs)(Ge.a,{className:i.table,"aria-label":"customized table",children:[Object(K.jsx)(Be.a,{children:Object(K.jsx)(Fe.a,{children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(K.jsx)(Ye,{children:e.title},t)}))})}),Object(K.jsx)(qe.a,{children:null===r||void 0===r?void 0:r.map((function(e){return Object(K.jsx)(ze,{children:null===t||void 0===t?void 0:t.map((function(t){return Object(K.jsx)(Ye,{children:t.render(e)},t.title)}))},e.id)}))})]}),Object(K.jsx)(He,{show:a,handleClose:c,handleDelete:n})]})},$e=function(e){var t=e.data,r=e.loading,a=e.href,c=e.readAction,o=e.tableConfig,d=e.deleteAction,l=e.btnLabel,j=Object(n.useState)(!1),b=Object(Te.a)(j,2),p=b[0],O=b[1],m=Object(n.useState)({}),h=Object(Te.a)(m,2),x=h[0],v=h[1],f=Object(s.g)(),y=Object(H.b)(),g=Object(H.c)((function(e){return e.alertReducer}))||[];return Object(n.useEffect)((function(){0===t.length?y(c()):console.log("USING CACHED DATA FROM REDUX")}),[]),Object(K.jsxs)("div",{children:[Object(K.jsx)(i.b,{to:a,children:Object(K.jsxs)(u.a,{className:"add-btn",children:[Object(K.jsx)(Le.a,{})," ",l]})}),r?Object(K.jsx)(Ne,{}):Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(ae,{alerts:g}),Object(K.jsx)(Xe,{cols:o((function(e){f.push({pathname:"".concat(a),state:{record:e,update:!0}})}),(function(e){O(!0),v(e)})),data:t,show:p,handleDelete:function(){y(d(x,f,t)),O(!1)},handleClose:function(){return O(!1)}})]})]})},Je=Se({title:"Manage Medicine"})((function(){var e=Object(H.c)((function(e){return e.medReducer}))||{},t=e.meds,r=e.loading;return Object(K.jsx)($e,{data:t,loading:r,href:"/add-medicine",readAction:ie,tableConfig:Me,deleteAction:se,btnLabel:"Add Medicine"})})),Ke=r(359),Qe=r(164),Ze=r(169),et=r.n(Ze),tt=function(e){var t=e.href;return Object(K.jsxs)("div",{style:{float:"right"},children:[Object(K.jsx)(i.b,{to:t,children:Object(K.jsx)(u.a,{variant:"primary",type:"button",style:{marginRight:"30px"},children:"Back"})}),Object(K.jsx)(u.a,{variant:"primary",type:"submit",children:"Save"})]})},rt=Se({title:"Add Medicine"})((function(e){var t,r,a,c,i,u,p,h=e.location.state||{},x=h.record,v=h.update,y=Object(H.c)((function(e){return e.alertReducer}))||[],g=(Object(H.c)((function(e){return e.medReducer}))||{}).medTypes,_=(Object(H.c)((function(e){return e.storeReducer}))||{}).stores,E=Object(s.g)(),S=Object(H.b)(),R=Object(j.d)({resolver:Object(b.a)(J)}),w=R.register,C=R.handleSubmit,M=R.formState.errors,N=R.reset;return Object(n.useEffect)((function(){0===g.length||0===_.length?B.a.all([F.get("medicine/types/"),F.get("store/")]).then(B.a.spread((function(e,t){console.log("DATA FETCHED FROM SERVER"),S({type:D,payload:e.data}),S({type:f,payload:t.data}),N({medicine_type_id:null===x||void 0===x?void 0:x.medicine_type_id,store_id:null===x||void 0===x?void 0:x.store_id})}))).catch((function(e){return console.log(e)})):console.log("USING CACHED DATA FROM REDUX")}),[]),Object(K.jsxs)(d.a,{children:[Object(K.jsx)(ae,{alerts:y}),Object(K.jsxs)(l.a,{onSubmit:C((function(e){var t=Object(o.a)(Object(o.a)({},e),{},{medicine_expiry_date:et()(e.medicine_expiry_date).format("YYYY-MM-DD")});S(v?function(e,t){return function(){var r=Object(m.a)(O.a.mark((function r(n){var a,c,i;return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,F.put("medicine/",e);case 3:i=r.sent,n({type:A,payload:null===(a=i.data)||void 0===a?void 0:a.RECORD}),n(V(null===(c=i.data)||void 0===c?void 0:c.MSG,"success")),t.push("/medicines"),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),r.t0&&n(V("Operation Failed !","success"));case 12:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()}(Object(o.a)(Object(o.a)({},t),{},{id:null===x||void 0===x?void 0:x.id}),E):function(e,t){return function(){var r=Object(m.a)(O.a.mark((function r(n){var a,c,i;return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,F.post("medicine/",e);case 3:i=r.sent,n({type:T,payload:null===(a=i.data)||void 0===a?void 0:a.RECORD}),n(V(null===(c=i.data)||void 0===c?void 0:c.MSG,"success")),t.push("/medicines"),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),r.t0&&n(V("Operation Failed !","danger"));case 12:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()}(t,E))})),children:[Object(K.jsxs)(Ke.a,{children:[Object(K.jsx)(Qe.a,{lg:6,children:Object(K.jsxs)(l.a.Group,{className:"mb-3",controlId:"formBasicUsername",children:[Object(K.jsx)(l.a.Label,{children:"Medicine Name"}),Object(K.jsx)(l.a.Control,Object(o.a)({type:"text",defaultValue:null===x||void 0===x?void 0:x.medicine_name},w("medicine_name"))),Object(K.jsx)(Q,{error:null===(t=M.medicine_name)||void 0===t?void 0:t.message})]})}),Object(K.jsx)(Qe.a,{lg:6,children:Object(K.jsxs)(l.a.Group,{className:"mb-3",controlId:"formBasicUsername",children:[Object(K.jsx)(l.a.Label,{children:"Medicine Price"}),Object(K.jsx)(l.a.Control,Object(o.a)({type:"number",step:".01",defaultValue:null===x||void 0===x?void 0:x.medicine_price},w("medicine_price"))),Object(K.jsx)(Q,{error:null===(r=M.medicine_price)||void 0===r?void 0:r.message})]})}),Object(K.jsx)(Qe.a,{lg:6,children:Object(K.jsxs)(l.a.Group,{className:"mb-3",controlId:"formBasicUsername",children:[Object(K.jsx)(l.a.Label,{children:"Medicine Details"}),Object(K.jsx)(l.a.Control,Object(o.a)({type:"text",defaultValue:null===x||void 0===x?void 0:x.medicine_details},w("medicine_details"))),Object(K.jsx)(Q,{error:null===(a=M.medicine_details)||void 0===a?void 0:a.message})]})}),Object(K.jsx)(Qe.a,{lg:6,children:Object(K.jsxs)(l.a.Group,{className:"mb-3",controlId:"formBasicUsername",children:[Object(K.jsx)(l.a.Label,{children:"Medicine Quantity"}),Object(K.jsx)(l.a.Control,Object(o.a)({type:"number",defaultValue:null===x||void 0===x?void 0:x.medicine_quantity},w("medicine_quantity"))),Object(K.jsx)(Q,{error:null===(c=M.medicine_quantity)||void 0===c?void 0:c.message})]})}),Object(K.jsx)(Qe.a,{lg:6,children:Object(K.jsxs)(l.a.Group,{className:"mb-3",children:[Object(K.jsx)(l.a.Label,{children:"Medicine Type"}),Object(K.jsxs)(l.a.Select,Object(o.a)(Object(o.a)({"aria-label":"Default select example",name:"medicine_type_id",defaultValue:null===x||void 0===x?void 0:x.medicine_type_id},w("medicine_type_id")),{},{children:[Object(K.jsx)("option",{value:"",children:"Select Medicine Type..."}),null===g||void 0===g?void 0:g.map((function(e){return Object(K.jsx)("option",{value:e.id,children:e.medicine_type_name},e.id)}))]})),Object(K.jsx)(Q,{error:null===(i=M.medicine_type_id)||void 0===i?void 0:i.message})]})}),Object(K.jsx)(Qe.a,{lg:6,children:Object(K.jsxs)(l.a.Group,{className:"mb-3",children:[Object(K.jsx)(l.a.Label,{children:"Store"}),Object(K.jsxs)(l.a.Select,Object(o.a)(Object(o.a)({"aria-label":"Default select example",defaultValue:null===x||void 0===x?void 0:x.store_id},w("store_id")),{},{children:[Object(K.jsx)("option",{value:"",children:"Select Store..."}),null===_||void 0===_?void 0:_.map((function(e){return Object(K.jsx)("option",{value:e.id,children:e.store_name},e.id)}))]})),Object(K.jsx)(Q,{error:null===(u=M.store_id)||void 0===u?void 0:u.message})]})}),Object(K.jsx)(Qe.a,{lg:6,children:Object(K.jsxs)(l.a.Group,{className:"mb-3",controlId:"formBasicUsername",children:[Object(K.jsx)(l.a.Label,{children:"Medicine Expiry Date"}),Object(K.jsx)(l.a.Control,Object(o.a)({type:"date",defaultValue:null===x||void 0===x?void 0:x.medicine_expiry_date},w("medicine_expiry_date"))),Object(K.jsx)(Q,{error:null===(p=M.medicine_expiry_date)||void 0===p?void 0:p.message})]})})]}),Object(K.jsx)(tt,{href:"/medicines"})]})]})})),nt=function(){return function(){var e=Object(m.a)(O.a.mark((function e(t){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.get("store/");case 3:r=e.sent,t({type:f,payload:r.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:y});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},at=function(e,t,r){return function(){var t=Object(m.a)(O.a.mark((function t(n){var a,c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:S,payload:e}),t.prev=1,t.next=4,F.delete("store/",{data:e});case 4:c=t.sent,n(V(null===(a=c.data)||void 0===a?void 0:a.MSG,"success")),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),t.t0&&(console.log(t.t0.response),n({type:R,payload:r}),n(V("Operation Failed !","danger")));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},ct=function(e,t,r){return[Ce(e,t),{title:"Store Name",render:function(e){return Object(K.jsx)("span",{children:e.store_name})}},{title:"Username",render:function(e){return Object(K.jsx)("span",{children:e.username})}},{title:"Store License",render:function(e){return Object(K.jsx)("span",{children:0===e.store_license?"Retail Drug Licence":"Wholesale Drug Licence"})}},{title:"Store Type",render:function(e){return Object(K.jsx)("span",{children:e.store_type_label})}}]},it=Se({title:"Manage Store"})((function(){var e=Object(H.c)((function(e){return e.storeReducer}))||{},t=e.stores,r=e.loading;return Object(K.jsx)($e,{data:t,loading:r,href:"/add-store",readAction:nt,tableConfig:ct,deleteAction:at,btnLabel:"Add Store"})})),st=Se({title:"Add Store"})((function(e){var t,r,a,c,i,u,p,h,x,v=e.location.state||{},f=v.record,y=v.update,S=(Object(H.c)((function(e){return e.storeReducer}))||{}).storeTypes,R=Object(H.c)((function(e){return e.alertReducer}))||[],C=Object(H.b)(),M=Object(s.g)(),T=Object(j.d)({resolver:Object(b.a)(X(y))}),D=T.register,N=T.handleSubmit,k=T.formState.errors,L=T.reset;return Object(n.useEffect)((function(){var e=function(){var e=Object(m.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("FETCHING STORE TYPES...."),e.prev=1,e.next=4,F.get("store/types/");case 4:t=e.sent,C({type:g,payload:t.data}),L({store_type_id:null===f||void 0===f?void 0:f.store_type_id}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),C({type:_});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();0===S.length?e():console.log("USING CACHED STORE TYPES FROM REDUX")}),[]),Object(K.jsxs)(d.a,{children:[Object(K.jsx)(ae,{alerts:R}),Object(K.jsxs)(l.a,{onSubmit:N((function(e){C(y?function(e,t){return function(){var r=Object(m.a)(O.a.mark((function r(n){var a,c,i,s,o;return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,F.put("store/",e);case 3:i=r.sent,n({type:w,payload:null===(a=i.data)||void 0===a?void 0:a.RECORD}),n(V(null===(c=i.data)||void 0===c?void 0:c.MSG,"success")),t.push("/stores"),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),r.t0&&(400===(null===(s=r.t0.response)||void 0===s?void 0:s.status)?(null===(o=r.t0.response)||void 0===o?void 0:o.data.username)&&n(V(r.t0.response.data.username,"danger")):n(V("Operation Failed !","danger")));case 12:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()}(Object(o.a)(Object(o.a)({},e),{},{id:null===f||void 0===f?void 0:f.id}),M):function(e,t){return function(){var r=Object(m.a)(O.a.mark((function r(n){var a,c,i;return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,F.post("store/",e);case 3:i=r.sent,n({type:E,payload:null===(a=i.data)||void 0===a?void 0:a.RECORD}),n(V(null===(c=i.data)||void 0===c?void 0:c.MSG,"success")),t.push("/stores"),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),r.t0&&400===r.t0.response.status&&r.t0.response.data.username&&n(V(r.t0.response.data.username,"danger"));case 12:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()}(e,M))})),children:[Object(K.jsxs)(Ke.a,{children:[Object(K.jsx)(Qe.a,{lg:6,children:Object(K.jsxs)(l.a.Group,{className:"mb-3",controlId:"formBasicUsername",children:[Object(K.jsx)(l.a.Label,{children:"Store Name"}),Object(K.jsx)(l.a.Control,Object(o.a)({type:"text",defaultValue:null===f||void 0===f?void 0:f.store_name},D("store_name"))),Object(K.jsx)(Q,{error:null===(t=k.store_name)||void 0===t?void 0:t.message})]})}),Object(K.jsx)(Qe.a,{lg:6,children:Object(K.jsxs)(l.a.Group,{className:"mb-3",controlId:"formBasicUsername",children:[Object(K.jsx)(l.a.Label,{children:"Username"}),Object(K.jsx)(l.a.Control,Object(o.a)({type:"text",defaultValue:null===f||void 0===f?void 0:f.username},D("username"))),Object(K.jsx)(Q,{error:null===(r=k.username)||void 0===r?void 0:r.message})]})}),!y&&Object(K.jsx)(Qe.a,{lg:6,children:Object(K.jsxs)(l.a.Group,{className:"mb-3",controlId:"formBasicUsername",children:[Object(K.jsx)(l.a.Label,{children:"Password"}),Object(K.jsx)(l.a.Control,Object(o.a)({type:"text",defaultValue:null===f||void 0===f?void 0:f.password},D("password"))),Object(K.jsx)(Q,{error:null===(a=k.password)||void 0===a?void 0:a.message})]})}),Object(K.jsx)(Qe.a,{lg:6,children:Object(K.jsxs)(l.a.Group,{className:"mb-3",controlId:"formBasicUsername",children:[Object(K.jsx)(l.a.Label,{children:"Email Id"}),Object(K.jsx)(l.a.Control,Object(o.a)({type:"text",defaultValue:null===f||void 0===f?void 0:f.store_email_id},D("store_email_id"))),Object(K.jsx)(Q,{error:null===(c=k.store_email_id)||void 0===c?void 0:c.message})]})}),Object(K.jsx)(Qe.a,{lg:6,children:Object(K.jsxs)(l.a.Group,{className:"mb-3",controlId:"formBasicUsername",children:[Object(K.jsx)(l.a.Label,{children:"Mobile Number"}),Object(K.jsx)(l.a.Control,Object(o.a)({type:"text",defaultValue:null===f||void 0===f?void 0:f.mobile_number},D("mobile_number"))),Object(K.jsx)(Q,{error:null===(i=k.mobile_number)||void 0===i?void 0:i.message})]})}),Object(K.jsx)(Qe.a,{lg:6,children:Object(K.jsxs)(l.a.Group,{className:"mb-3",controlId:"formBasicUsername",children:[Object(K.jsx)(l.a.Label,{children:"Registration No"}),Object(K.jsx)(l.a.Control,Object(o.a)({type:"text",defaultValue:null===f||void 0===f?void 0:f.store_registration_no},D("store_registration_no"))),Object(K.jsx)(Q,{error:null===(u=k.store_registration_no)||void 0===u?void 0:u.message})]})}),Object(K.jsx)(Qe.a,{lg:6,children:Object(K.jsxs)(l.a.Group,{children:[Object(K.jsx)(l.a.Label,{children:"Store License"}),Object(K.jsxs)(l.a.Group,{children:[Object(K.jsx)(l.a.Check,Object(o.a)({inline:!0,label:"Retail Drug License",type:"radio",value:0,defaultChecked:0===(null===f||void 0===f?void 0:f.store_license)},D("store_license"))),Object(K.jsx)(l.a.Check,Object(o.a)({inline:!0,label:"Wholesale Drug License",type:"radio",value:1,defaultChecked:1===(null===f||void 0===f?void 0:f.store_license)},D("store_license")))]}),Object(K.jsx)(Q,{error:null===(p=k.store_license)||void 0===p?void 0:p.message})]})}),Object(K.jsx)(Qe.a,{lg:6,children:Object(K.jsxs)(l.a.Group,{className:"mb-3",children:[Object(K.jsx)(l.a.Label,{children:"Store Type"}),Object(K.jsxs)(l.a.Select,Object(o.a)(Object(o.a)({"aria-label":"Default select example",defaultValue:null===f||void 0===f?void 0:f.store_type_id},D("store_type_id")),{},{children:[Object(K.jsx)("option",{value:"",children:"Select Store Type..."}),null===S||void 0===S?void 0:S.map((function(e){return Object(K.jsx)("option",{value:e.id,children:e.type_name},e.id)}))]})),Object(K.jsx)(Q,{error:null===(h=k.store_type_id)||void 0===h?void 0:h.message})]})}),Object(K.jsx)(Qe.a,{lg:6,children:Object(K.jsxs)(l.a.Group,{className:"mb-3",children:[Object(K.jsx)(l.a.Label,{children:"Address 1"}),Object(K.jsx)(l.a.Control,Object(o.a)({as:"textarea",rows:3,defaultValue:null===f||void 0===f?void 0:f.address_1},D("address_1"))),Object(K.jsx)(Q,{error:null===(x=k.address_1)||void 0===x?void 0:x.message})]})}),Object(K.jsx)(Qe.a,{lg:6,children:Object(K.jsxs)(l.a.Group,{className:"mb-3",children:[Object(K.jsx)(l.a.Label,{children:"Address 2"}),Object(K.jsx)(l.a.Control,Object(o.a)({as:"textarea",rows:3,defaultValue:null===f||void 0===f?void 0:f.address_2},D("address_2")))]})})]}),Object(K.jsx)(tt,{href:"/stores"})]})]})})),ot=r(6),dt=["component"],lt=function(e){var t=e.component,r=Object(ot.a)(e,dt),n=Object(H.c)((function(e){return e.authReducer}))||{},a=n.loading,c=n.isAuthenticated;return Object(K.jsx)(s.b,Object(o.a)(Object(o.a)({},r),{},{render:function(e){return a?Object(K.jsx)(Ne,{}):c?Object(K.jsx)(t,Object(o.a)({},e)):Object(K.jsx)(s.a,{to:{pathname:"/",authenticated:!1}})}}))},ut=function(){var e=Object(H.b)();return Object(n.useEffect)((function(){e(function(){var e=Object(m.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.get("store/auth-check/");case 3:t({type:h}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),e.t0&&t({type:x});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()),window.addEventListener("storage",(function(){U()||e({type:x})}))}),[e]),Object(K.jsx)(i.a,{children:Object(K.jsxs)(s.d,{children:[Object(K.jsx)(s.b,{path:"/",component:ce,exact:!0}),Object(K.jsx)(lt,{path:"/stores",component:it}),Object(K.jsx)(lt,{path:"/add-store",component:st}),Object(K.jsx)(lt,{path:"/medicines",component:Je}),Object(K.jsx)(lt,{path:"/add-medicine",component:rt})]})})},jt=(r(304),r(62)),bt={isAuthenticated:!1,loading:!0},pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return{isAuthenticated:!0,loading:!1};case x:case v:return Object(o.a)(Object(o.a)({},e),{},{user:null,isAuthenticated:!1,loading:!1});default:return e}},Ot=r(12),mt={stores:[],loading:!0,storeTypes:[]},ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(o.a)(Object(o.a)({},e),{},{stores:t.payload,loading:!1});case y:return Object(o.a)(Object(o.a)({},e),{},{loading:!1});case g:return Object(o.a)(Object(o.a)({},e),{},{storeTypes:t.payload,loading:!1});case _:return Object(o.a)(Object(o.a)({},e),{},{loading:!1});case E:return Object(o.a)(Object(o.a)({},e),{},{stores:[].concat(Object(Ot.a)(e.stores),[t.payload])});case w:return Object(o.a)(Object(o.a)({},e),{},{stores:e.stores.map((function(e){return e.id===t.payload.id?t.payload:e}))});case S:return Object(o.a)(Object(o.a)({},e),{},{stores:e.stores.filter((function(e){return e.id!==t.payload.id}))});case R:return Object(o.a)(Object(o.a)({},e),{},{stores:t.payload});default:return e}},xt={meds:[],loading:!0,medTypes:[]},vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(o.a)(Object(o.a)({},e),{},{meds:t.payload,loading:!1});case M:return Object(o.a)(Object(o.a)({},e),{},{loading:!1});case D:return Object(o.a)(Object(o.a)({},e),{},{medTypes:t.payload,loading:!1});case N:return Object(o.a)(Object(o.a)({},e),{},{loading:!1});case T:return Object(o.a)(Object(o.a)({},e),{},{meds:[].concat(Object(Ot.a)(e.meds),[t.payload])});case A:return Object(o.a)(Object(o.a)({},e),{},{meds:e.meds.map((function(e){return e.id===t.payload.id?t.payload:e}))});case k:return Object(o.a)(Object(o.a)({},e),{},{meds:e.meds.filter((function(e){return e.id!==t.payload.id}))});case L:return Object(o.a)(Object(o.a)({},e),{},{meds:t.payload});default:return e}},ft=[],yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return[].concat(Object(Ot.a)(e),[t.payload]);case q:return e.filter((function(e){return e.id!==t.payload}));default:return e}},gt=Object(jt.combineReducers)({authReducer:pt,storeReducer:ht,medReducer:vt,alertReducer:yt}),_t=r(170),Et=r(171),St=Object(Et.composeWithDevTools)(Object(jt.applyMiddleware)(_t.a)),Rt=Object(jt.createStore)(gt,St);c.a.render(Object(K.jsx)(H.a,{store:Rt,children:Object(K.jsx)(ut,{})}),document.getElementById("root"))}},[[305,1,2]]]);
//# sourceMappingURL=main.4b375110.chunk.js.map
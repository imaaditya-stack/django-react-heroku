(this["webpackJsonpmedical-store"]=this["webpackJsonpmedical-store"]||[]).push([[0],{180:function(e,t,r){},305:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(19),c=r.n(a),s=(r(180),r(36)),i=r(23),o=r(2),d=r(340),l=r(361),u=r(343),j=r(37),b=r(63),p=r(7),O=r.n(p),m=r(16),x="AUTH_CHECK",h="AUTH_ERROR",v="LOGOUT",f="LOAD_STORES",g="STORES_ERROR",y="STORE_TYPES",_="STORE_TYPES_ERROR",E="ADD_STORE",S="DELETE_STORE",R="DELETE_STORE_ERROR",N="UPDATE_STORE",w="LOAD_MEDS",T="MEDS_ERROR",C="ADD_MEDS",D="MED_TYPES",M="MED_TYPES_ERROR",k="DELETE_MED",L="DELETE_MED_ERROR",A="UPDATE_MED",G="SET_ALERT",U="REMOVE_ALERT",q=function(){var e;return null===(e=localStorage)||void 0===e?void 0:e.AUTH},I=r(75),P=r.n(I),F={baseURL:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL||"http://localhost:8000/api/",headers:{"Content-Type":"application/json"}},B=P.a.create(F);B.interceptors.request.use((function(e){var t=q();return t?e.headers.Authorization="Token ".concat(t):delete e.headers.Authorization,e}),(function(e){return Promise.reject(e)})),B.interceptors.response.use((function(e){return e}),(function(e){if(e.response)return 401===e.response.status&&localStorage.clear(),Promise.reject(e)}));var V=r(365),H=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1500;return function(n){var a=Object(V.a)();n({type:G,payload:{msg:e,type:t,id:a}}),setTimeout((function(){return n({type:U,payload:a})}),r)}},Y=r(15),W=r(20),z=W.c().shape({username:W.d().required(),password:W.d().required()}),K=/^((\\+[1-9]{1,4}[ \\-]*)|(\\([0-9]{2,3}\\)[ \\-]*)|([0-9]{2,4})[ \\-]*)*?[0-9]{3,4}?[ \\-]*[0-9]{3,4}?$/,X=function(e){var t=e?{}:{password:W.d().required().min(6).max(10)};return W.c().shape(Object(o.a)(Object(o.a)({store_name:W.d().required("Store Name is a required field").min(3).max(60),username:W.d().required("Username is a required field").min(3).max(45)},t),{},{store_email_id:W.d().email("Invalid Email").notRequired(),mobile_number:W.d().matches(K,{message:"Phone number is not valid",excludeEmptyString:!0}),store_registration_no:W.d().matches(/^(|.{5,})$/,"Registration Number must be at least 5 characters").max(60,"Registration Number must not be more than 60 characters").nullable(),store_license:W.d().required("Store License is a required field").nullable(),store_type_id:W.d().required("Store Type is a required field"),address_1:W.d().required("Address 1 is a required field"),address_2:W.d().notRequired()}))},$=new Date;$.setFullYear($.getFullYear()+2);var J=W.c().shape({medicine_name:W.d().required("Medicine name is a required field").min(3,"Medicine name must be at least 5 characters").max(60,"Medicine name must not be more than 60 characters"),medicine_price:W.b().required("Medicine price is a required field").min(1,"Medicine price must be greater than or equal to 1").max(999.99,"Medicine price must be less than or equal to 999.99").nullable(!0).transform((function(e){return isNaN(e)?void 0:e})),medicine_details:W.d().matches(/^(|.{10,})$/,"Medicine details must have atleast 10 characters").max(100,"Medicine details must not be more than 60 characters").nullable(),medicine_quantity:W.b().integer("Medicine quantity must be an integer").min(1).max(99).nullable(!0).transform((function(e){return isNaN(e)?void 0:e})),medicine_type_id:W.d().required("Medicine type is a required field"),store_id:W.d().required("Store is a required field"),medicine_expiry_date:W.a().required().min($,"Expiry date should be atleast 2 years from today").nullable().typeError("Invalid expiry date")}),Q=r(1),Z=function(e){var t=e.error;return Object(Q.jsx)("span",{className:"text-danger",children:t})},ee=r(101),te=r.n(ee),re=r(363),ne=r(4),ae=r.n(ne);re.a.propTypes={alerts:ae.a.arrayOf(ae.a.shape({msg:ae.a.string,type:ae.a.string,id:ae.a.number}))};var ce=function(e){var t=e.alerts;return null===t||void 0===t?void 0:t.map((function(e){return Object(Q.jsx)(re.a,{variant:e.type,children:Object(Q.jsx)("span",{children:e.msg})},e.id)}))},se=function(){var e,t,r=Object(Y.c)((function(e){return e.alertReducer}))||[],n=Object(i.g)(),a=Object(Y.b)(),c=Object(j.d)({resolver:Object(b.a)(z)}),s=c.register,p=c.handleSubmit,h=c.formState.errors;return Object(Q.jsxs)(d.a,{className:"login_container",children:[Object(Q.jsx)("center",{children:Object(Q.jsx)(te.a,{})}),Object(Q.jsx)("h1",{children:"Medical Store Management"}),Object(Q.jsxs)(d.a,{className:"form_container",children:[Object(Q.jsx)(ce,{alerts:r}),Object(Q.jsxs)(l.a,{onSubmit:p((function(e){a(function(e,t){return function(){var r=Object(m.a)(O.a.mark((function r(n){var a;return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,B.post("store/login/",e);case 3:c=r.sent.data.token,localStorage.setItem("AUTH",c),n({type:x}),t.push("/stores"),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),r.t0.response&&404===r.t0.response.status&&n(H(null===(a=r.t0.response.data)||void 0===a?void 0:a.MSG,"danger"));case 12:case"end":return r.stop()}var c}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()}(e,n))})),children:[Object(Q.jsxs)(l.a.Group,{className:"mb-3",controlId:"formBasicUsername",children:[Object(Q.jsx)(l.a.Label,{children:"Username"}),Object(Q.jsx)(l.a.Control,Object(o.a)({type:"text",placeholder:"Enter username"},s("username"))),Object(Q.jsx)(Z,{error:null===(e=h.username)||void 0===e?void 0:e.message})]}),Object(Q.jsxs)(l.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(Q.jsx)(l.a.Label,{children:"Password"}),Object(Q.jsx)(l.a.Control,Object(o.a)({type:"password",placeholder:"Password"},s("password"))),Object(Q.jsx)(Z,{error:null===(t=h.password)||void 0===t?void 0:t.message})]}),Object(Q.jsx)("center",{children:Object(Q.jsx)(u.a,{type:"submit",children:"Login"})})]})]})]})},ie=function(){return function(){var e=Object(m.a)(O.a.mark((function e(t){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.get("medicine/");case 3:r=e.sent,t({type:w,payload:r.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:T});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},oe=function(e,t,r){return function(){var t=Object(m.a)(O.a.mark((function t(n){var a,c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:k,payload:e}),t.prev=1,t.next=4,B.delete("medicine/",{data:e});case 4:c=t.sent,n(H(null===(a=c.data)||void 0===a?void 0:a.MSG,"success")),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),t.t0&&(n({type:L,payload:r}),n(H("Operation Failed !","danger")));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},de=r(351),le=r(347),ue=r(348),je=r(349),be=r(109),pe=r(350),Oe=r(362),me=r(344),xe=r(364),he=r(345),ve=r(346),fe=r(166),ge=r.n(fe),ye=r(165),_e=r.n(ye),Ee=[{title:"Logout",icon:Object(Q.jsx)(_e.a,{}),href:"/",canClick:!0},{title:"Manage Store",icon:Object(Q.jsx)(ge.a,{}),href:"/stores"},{title:"Manage Medicine",icon:Object(Q.jsx)(te.a,{}),href:"/medicines"}],Se=function(){var e=Object(Y.b)(),t=Object(i.g)(),r=function(){e(function(e){return function(){var t=Object(m.a)(O.a.mark((function t(r){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.get("store/logout/");case 3:r({type:v}),localStorage.clear(),e.push("/"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),t.t0.response&&console.log(t.t0.response);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(t))};return Object(Q.jsx)(Q.Fragment,{children:Object(Q.jsx)(me.a,{children:Ee.map((function(e){return e.canClick?Object(Q.jsxs)(xe.a,{button:!0,onClick:r,children:[Object(Q.jsx)(he.a,{children:e.icon}),Object(Q.jsx)(ve.a,{primary:e.title})]},e.title):Object(Q.jsxs)(xe.a,{button:!0,component:s.b,to:e.href,children:[Object(Q.jsx)(he.a,{children:e.icon}),Object(Q.jsx)(ve.a,{primary:e.title})]},e.title)}))})})},Re=function(e){return function(t){return function(r){var n=we();return Object(Q.jsx)(Q.Fragment,{children:Object(Q.jsxs)("div",{className:n.root,children:[Object(Q.jsx)(le.a,{}),Object(Q.jsx)(ue.a,{position:"fixed",className:n.appBar,children:Object(Q.jsx)(je.a,{children:Object(Q.jsx)(be.a,{variant:"h6",noWrap:!0,children:e.title})})}),Object(Q.jsxs)(Oe.a,{className:n.drawer,variant:"permanent",classes:{paper:n.drawerPaper},anchor:"left",children:[Object(Q.jsx)("div",{className:n.toolbar}),Object(Q.jsx)(pe.a,{}),Object(Q.jsx)(Se,{})]}),Object(Q.jsxs)("main",{className:n.content,children:[Object(Q.jsx)("div",{className:n.toolbar}),Object(Q.jsx)(t,Object(o.a)({},r))]})]})})}}},Ne=240,we=Object(de.a)((function(e){return{root:{display:"flex"},appBar:{width:"calc(100% - ".concat(Ne,"px)"),marginLeft:Ne,backgroundColor:"#0364C0"},drawer:{width:Ne,flexShrink:0},drawerPaper:{width:Ne},toolbar:e.mixins.toolbar,content:{flexGrow:1,backgroundColor:e.palette.background.default,padding:e.spacing(3)}}})),Te=function(e,t){return{title:"Action",render:function(r){return Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(u.a,{onClick:function(){return e(r)},style:{marginRight:"20px"},children:"Edit"}),Object(Q.jsx)(u.a,{className:"red-btn",onClick:function(){return t(r)},children:"Delete"})]})}}},Ce=function(e,t){return[Te(e,t),{title:"Medicine Name",render:function(e){return Object(Q.jsx)("span",{children:e.medicine_name})}},{title:"Medicine Price",render:function(e){return Object(Q.jsx)("span",{children:e.medicine_price})}},{title:"Expiry Date",render:function(e){return Object(Q.jsx)("span",{children:e.medicine_expiry_date})}},{title:"Medicine Type",render:function(e){return Object(Q.jsx)("span",{children:e.medicine_type_id_label})}},{title:"Store Name",render:function(e){return Object(Q.jsx)("span",{children:e.store_id_label})}}]},De=r(26),Me=r(352),ke=function(){return Object(Q.jsx)("div",{className:"text-center",children:Object(Q.jsx)(Me.a,{animation:"border",variant:"primary",size:"lg"})})},Le=r(168),Ae=r.n(Le),Ge=r(10),Ue=r(354),qe=r(357),Ie=r(358),Pe=r(353),Fe=r(355),Be=r(356),Ve=r(307),He=r(360),Ye=function(e){var t=e.show,r=e.handleClose,n=e.handleDelete;return Object(Q.jsx)(Q.Fragment,{children:Object(Q.jsxs)(He.a,{show:t,onHide:r,centered:!0,children:[Object(Q.jsx)(He.a.Header,{closeButton:!0,children:Object(Q.jsx)(He.a.Title,{children:"Warning"})}),Object(Q.jsx)(He.a.Body,{children:"Are you sure you want to delete the record?"}),Object(Q.jsxs)(He.a.Footer,{children:[Object(Q.jsx)(u.a,{variant:"secondary",onClick:r,children:"No"}),Object(Q.jsx)(u.a,{className:"red-btn",onClick:n,children:"Confirm"})]})]})})},We=Object(Ge.a)((function(e){return{head:{backgroundColor:"#0364C0",color:e.palette.common.white,fontSize:16},body:{fontSize:14}}}))(Ie.a),ze=Object(Ge.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover}}}}))(Be.a),Ke=Object(de.a)({table:{minWidth:700}}),Xe=function(e){var t=e.cols,r=e.data,n=e.handleDelete,a=e.show,c=e.handleClose,s=Ke();return Object(Q.jsxs)(Pe.a,{component:Ve.a,children:[Object(Q.jsxs)(Ue.a,{className:s.table,"aria-label":"customized table",children:[Object(Q.jsx)(Fe.a,{children:Object(Q.jsx)(Be.a,{children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(Q.jsx)(We,{children:e.title},t)}))})}),Object(Q.jsx)(qe.a,{children:null===r||void 0===r?void 0:r.map((function(e){return Object(Q.jsx)(ze,{children:null===t||void 0===t?void 0:t.map((function(t){return Object(Q.jsx)(We,{children:t.render(e)},t.title)}))},e.id)}))})]}),Object(Q.jsx)(Ye,{show:a,handleClose:c,handleDelete:n})]})},$e=function(e){var t=e.data,r=e.loading,a=e.href,c=e.readAction,o=e.tableConfig,d=e.deleteAction,l=e.btnLabel,j=Object(n.useState)(!1),b=Object(De.a)(j,2),p=b[0],O=b[1],m=Object(n.useState)({}),x=Object(De.a)(m,2),h=x[0],v=x[1],f=Object(i.g)(),g=Object(Y.b)(),y=Object(Y.c)((function(e){return e.alertReducer}))||[];return Object(n.useEffect)((function(){0===t.length?g(c()):console.log("USING CACHED DATA FROM REDUX")}),[]),Object(Q.jsxs)("div",{children:[Object(Q.jsx)(s.b,{to:a,children:Object(Q.jsxs)(u.a,{className:"add-btn",children:[Object(Q.jsx)(Ae.a,{})," ",l]})}),r?Object(Q.jsx)(ke,{}):Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(ce,{alerts:y}),Object(Q.jsx)(Xe,{cols:o((function(e){f.push({pathname:"".concat(a),state:{record:e,update:!0}})}),(function(e){O(!0),v(e)})),data:t,show:p,handleDelete:function(){g(d(h,f,t)),O(!1)},handleClose:function(){return O(!1)}})]})]})},Je=Re({title:"Manage Medicine"})((function(){var e=Object(Y.c)((function(e){return e.medReducer}))||{},t=e.meds,r=e.loading;return Object(Q.jsx)($e,{data:t,loading:r,href:"/add-medicine",readAction:ie,tableConfig:Ce,deleteAction:oe,btnLabel:"Add Medicine"})})),Qe=r(359),Ze=r(164),et=r(169),tt=r.n(et),rt=function(e){var t=e.href;return Object(Q.jsxs)("div",{style:{float:"right"},children:[Object(Q.jsx)(s.b,{to:t,children:Object(Q.jsx)(u.a,{variant:"primary",type:"button",style:{marginRight:"30px"},children:"Back"})}),Object(Q.jsx)(u.a,{variant:"primary",type:"submit",children:"Save"})]})},nt=Re({title:"Add Medicine"})((function(e){var t,r,a,c,s,u,p,x=e.location.state||{},h=x.record,v=x.update,g=Object(Y.c)((function(e){return e.alertReducer}))||[],y=(Object(Y.c)((function(e){return e.medReducer}))||{}).medTypes,_=(Object(Y.c)((function(e){return e.storeReducer}))||{}).stores,E=Object(i.g)(),S=Object(Y.b)(),R=Object(j.d)({resolver:Object(b.a)(J)}),N=R.register,w=R.handleSubmit,T=R.formState.errors,M=R.reset;return Object(n.useEffect)((function(){0===y.length||0===_.length?P.a.all([B.get("medicine/types/"),B.get("store/")]).then(P.a.spread((function(e,t){console.log("DATA FETCHED FROM SERVER"),S({type:D,payload:e.data}),S({type:f,payload:t.data}),M({medicine_type_id:null===h||void 0===h?void 0:h.medicine_type_id,store_id:null===h||void 0===h?void 0:h.store_id})}))).catch((function(e){return console.log(e)})):console.log("USING CACHED DATA FROM REDUX")}),[]),Object(Q.jsxs)(d.a,{children:[Object(Q.jsx)(ce,{alerts:g}),Object(Q.jsxs)(l.a,{onSubmit:w((function(e){var t=Object(o.a)(Object(o.a)({},e),{},{medicine_expiry_date:tt()(e.medicine_expiry_date).format("YYYY-MM-DD")});S(v?function(e,t){return function(){var r=Object(m.a)(O.a.mark((function r(n){var a,c,s;return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,B.put("medicine/",e);case 3:s=r.sent,n({type:A,payload:null===(a=s.data)||void 0===a?void 0:a.RECORD}),n(H(null===(c=s.data)||void 0===c?void 0:c.MSG,"success")),t.push("/medicines"),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),r.t0&&n(H("Operation Failed !","success"));case 12:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()}(Object(o.a)(Object(o.a)({},t),{},{id:null===h||void 0===h?void 0:h.id}),E):function(e,t){return function(){var r=Object(m.a)(O.a.mark((function r(n){var a,c,s;return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,B.post("medicine/",e);case 3:s=r.sent,n({type:C,payload:null===(a=s.data)||void 0===a?void 0:a.RECORD}),n(H(null===(c=s.data)||void 0===c?void 0:c.MSG,"success")),t.push("/medicines"),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),r.t0&&n(H("Operation Failed !","danger"));case 12:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()}(t,E))})),children:[Object(Q.jsxs)(Qe.a,{children:[Object(Q.jsx)(Ze.a,{lg:6,children:Object(Q.jsxs)(l.a.Group,{className:"mb-3",controlId:"formBasicUsername",children:[Object(Q.jsxs)(l.a.Label,{children:["Medicine Name ",Object(Q.jsx)("span",{className:"text-danger",children:"*"})]}),Object(Q.jsx)(l.a.Control,Object(o.a)({type:"text",defaultValue:null===h||void 0===h?void 0:h.medicine_name},N("medicine_name"))),Object(Q.jsx)(Z,{error:null===(t=T.medicine_name)||void 0===t?void 0:t.message})]})}),Object(Q.jsx)(Ze.a,{lg:6,children:Object(Q.jsxs)(l.a.Group,{className:"mb-3",controlId:"formBasicUsername",children:[Object(Q.jsxs)(l.a.Label,{children:["Medicine Price ",Object(Q.jsx)("span",{className:"text-danger",children:"*"})]}),Object(Q.jsx)(l.a.Control,Object(o.a)({type:"number",step:".01",defaultValue:null===h||void 0===h?void 0:h.medicine_price},N("medicine_price"))),Object(Q.jsx)(Z,{error:null===(r=T.medicine_price)||void 0===r?void 0:r.message})]})}),Object(Q.jsx)(Ze.a,{lg:6,children:Object(Q.jsxs)(l.a.Group,{className:"mb-3",controlId:"formBasicUsername",children:[Object(Q.jsx)(l.a.Label,{children:"Medicine Details"}),Object(Q.jsx)(l.a.Control,Object(o.a)({type:"text",defaultValue:null===h||void 0===h?void 0:h.medicine_details},N("medicine_details"))),Object(Q.jsx)(Z,{error:null===(a=T.medicine_details)||void 0===a?void 0:a.message})]})}),Object(Q.jsx)(Ze.a,{lg:6,children:Object(Q.jsxs)(l.a.Group,{className:"mb-3",controlId:"formBasicUsername",children:[Object(Q.jsx)(l.a.Label,{children:"Medicine Quantity"}),Object(Q.jsx)(l.a.Control,Object(o.a)({type:"number",defaultValue:null===h||void 0===h?void 0:h.medicine_quantity},N("medicine_quantity"))),Object(Q.jsx)(Z,{error:null===(c=T.medicine_quantity)||void 0===c?void 0:c.message})]})}),Object(Q.jsx)(Ze.a,{lg:6,children:Object(Q.jsxs)(l.a.Group,{className:"mb-3",children:[Object(Q.jsxs)(l.a.Label,{children:["Medicine Type ",Object(Q.jsx)("span",{className:"text-danger",children:"*"})]}),Object(Q.jsxs)(l.a.Select,Object(o.a)(Object(o.a)({"aria-label":"Default select example",name:"medicine_type_id",defaultValue:null===h||void 0===h?void 0:h.medicine_type_id},N("medicine_type_id")),{},{children:[Object(Q.jsx)("option",{value:"",children:"Select Medicine Type..."}),null===y||void 0===y?void 0:y.map((function(e){return Object(Q.jsx)("option",{value:e.id,children:e.medicine_type_name},e.id)}))]})),Object(Q.jsx)(Z,{error:null===(s=T.medicine_type_id)||void 0===s?void 0:s.message})]})}),Object(Q.jsx)(Ze.a,{lg:6,children:Object(Q.jsxs)(l.a.Group,{className:"mb-3",children:[Object(Q.jsxs)(l.a.Label,{children:["Store ",Object(Q.jsx)("span",{className:"text-danger",children:"*"})]}),Object(Q.jsxs)(l.a.Select,Object(o.a)(Object(o.a)({"aria-label":"Default select example",defaultValue:null===h||void 0===h?void 0:h.store_id},N("store_id")),{},{children:[Object(Q.jsx)("option",{value:"",children:"Select Store..."}),null===_||void 0===_?void 0:_.map((function(e){return Object(Q.jsx)("option",{value:e.id,children:e.store_name},e.id)}))]})),Object(Q.jsx)(Z,{error:null===(u=T.store_id)||void 0===u?void 0:u.message})]})}),Object(Q.jsx)(Ze.a,{lg:6,children:Object(Q.jsxs)(l.a.Group,{className:"mb-3",controlId:"formBasicUsername",children:[Object(Q.jsxs)(l.a.Label,{children:["Medicine Expiry Date ",Object(Q.jsx)("span",{className:"text-danger",children:"*"})]}),Object(Q.jsx)(l.a.Control,Object(o.a)({type:"date",defaultValue:null===h||void 0===h?void 0:h.medicine_expiry_date},N("medicine_expiry_date"))),Object(Q.jsx)(Z,{error:null===(p=T.medicine_expiry_date)||void 0===p?void 0:p.message})]})})]}),Object(Q.jsx)(rt,{href:"/medicines"})]})]})})),at=function(){return function(){var e=Object(m.a)(O.a.mark((function e(t){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.get("store/");case 3:r=e.sent,t({type:f,payload:r.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:g});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},ct=function(e,t,r){return function(){var t=Object(m.a)(O.a.mark((function t(n){var a,c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:S,payload:e}),t.prev=1,t.next=4,B.delete("store/",{data:e});case 4:c=t.sent,n(H(null===(a=c.data)||void 0===a?void 0:a.MSG,"success")),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),t.t0&&(console.log(t.t0.response),n({type:R,payload:r}),n(H("Operation Failed !","danger")));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},st=function(e,t,r){return[Te(e,t),{title:"Store Name",render:function(e){return Object(Q.jsx)("span",{children:e.store_name})}},{title:"Username",render:function(e){return Object(Q.jsx)("span",{children:e.username})}},{title:"Store License",render:function(e){return Object(Q.jsx)("span",{children:0===e.store_license?"Retail Drug Licence":"Wholesale Drug Licence"})}},{title:"Store Type",render:function(e){return Object(Q.jsx)("span",{children:e.store_type_label})}}]},it=Re({title:"Manage Store"})((function(){var e=Object(Y.c)((function(e){return e.storeReducer}))||{},t=e.stores,r=e.loading;return Object(Q.jsx)($e,{data:t,loading:r,href:"/add-store",readAction:at,tableConfig:st,deleteAction:ct,btnLabel:"Add Store"})})),ot=Re({title:"Add Store"})((function(e){var t,r,a,c,s,u,p,x,h,v=e.location.state||{},f=v.record,g=v.update,S=(Object(Y.c)((function(e){return e.storeReducer}))||{}).storeTypes,R=Object(Y.c)((function(e){return e.alertReducer}))||[],w=Object(Y.b)(),T=Object(i.g)(),C=Object(j.d)({resolver:Object(b.a)(X(g))}),D=C.register,M=C.handleSubmit,k=C.formState.errors,L=C.reset;return Object(n.useEffect)((function(){var e=function(){var e=Object(m.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("FETCHING STORE TYPES...."),e.prev=1,e.next=4,B.get("store/types/");case 4:t=e.sent,w({type:y,payload:t.data}),L({store_type_id:null===f||void 0===f?void 0:f.store_type_id}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),w({type:_});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();0===S.length?e():console.log("USING CACHED STORE TYPES FROM REDUX")}),[]),Object(Q.jsxs)(d.a,{children:[Object(Q.jsx)(ce,{alerts:R}),Object(Q.jsxs)(l.a,{onSubmit:M((function(e){w(g?function(e,t){return function(){var r=Object(m.a)(O.a.mark((function r(n){var a,c,s,i,o;return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,B.put("store/",e);case 3:s=r.sent,n({type:N,payload:null===(a=s.data)||void 0===a?void 0:a.RECORD}),n(H(null===(c=s.data)||void 0===c?void 0:c.MSG,"success")),t.push("/stores"),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),r.t0&&(400===(null===(i=r.t0.response)||void 0===i?void 0:i.status)?(null===(o=r.t0.response)||void 0===o?void 0:o.data.username)&&n(H(r.t0.response.data.username,"danger")):n(H("Operation Failed !","danger")));case 12:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()}(Object(o.a)(Object(o.a)({},e),{},{id:null===f||void 0===f?void 0:f.id}),T):function(e,t){return function(){var r=Object(m.a)(O.a.mark((function r(n){var a,c,s;return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,B.post("store/",e);case 3:s=r.sent,n({type:E,payload:null===(a=s.data)||void 0===a?void 0:a.RECORD}),n(H(null===(c=s.data)||void 0===c?void 0:c.MSG,"success")),t.push("/stores"),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),r.t0&&400===r.t0.response.status&&r.t0.response.data.username&&n(H(r.t0.response.data.username,"danger"));case 12:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()}(e,T))})),children:[Object(Q.jsxs)(Qe.a,{children:[Object(Q.jsx)(Ze.a,{lg:6,children:Object(Q.jsxs)(l.a.Group,{className:"mb-3",controlId:"formBasicUsername",children:[Object(Q.jsxs)(l.a.Label,{children:["Store Name ",Object(Q.jsx)("span",{className:"text-danger",children:"*"})," "]}),Object(Q.jsx)(l.a.Control,Object(o.a)({type:"text",defaultValue:null===f||void 0===f?void 0:f.store_name},D("store_name"))),Object(Q.jsx)(Z,{error:null===(t=k.store_name)||void 0===t?void 0:t.message})]})}),Object(Q.jsx)(Ze.a,{lg:6,children:Object(Q.jsxs)(l.a.Group,{className:"mb-3",controlId:"formBasicUsername",children:[Object(Q.jsxs)(l.a.Label,{children:["Username ",Object(Q.jsx)("span",{className:"text-danger",children:"*"})," "]}),Object(Q.jsx)(l.a.Control,Object(o.a)({type:"text",defaultValue:null===f||void 0===f?void 0:f.username},D("username"))),Object(Q.jsx)(Z,{error:null===(r=k.username)||void 0===r?void 0:r.message})]})}),!g&&Object(Q.jsx)(Ze.a,{lg:6,children:Object(Q.jsxs)(l.a.Group,{className:"mb-3",controlId:"formBasicUsername",children:[Object(Q.jsxs)(l.a.Label,{children:["Password ",Object(Q.jsx)("span",{className:"text-danger",children:"*"})," "]}),Object(Q.jsx)(l.a.Control,Object(o.a)({type:"text",defaultValue:null===f||void 0===f?void 0:f.password},D("password"))),Object(Q.jsx)(Z,{error:null===(a=k.password)||void 0===a?void 0:a.message})]})}),Object(Q.jsx)(Ze.a,{lg:6,children:Object(Q.jsxs)(l.a.Group,{className:"mb-3",controlId:"formBasicUsername",children:[Object(Q.jsx)(l.a.Label,{children:"Email Id"}),Object(Q.jsx)(l.a.Control,Object(o.a)({type:"text",defaultValue:null===f||void 0===f?void 0:f.store_email_id},D("store_email_id"))),Object(Q.jsx)(Z,{error:null===(c=k.store_email_id)||void 0===c?void 0:c.message})]})}),Object(Q.jsx)(Ze.a,{lg:6,children:Object(Q.jsxs)(l.a.Group,{className:"mb-3",controlId:"formBasicUsername",children:[Object(Q.jsx)(l.a.Label,{children:"Mobile Number"}),Object(Q.jsx)(l.a.Control,Object(o.a)({type:"text",defaultValue:null===f||void 0===f?void 0:f.mobile_number},D("mobile_number"))),Object(Q.jsx)(Z,{error:null===(s=k.mobile_number)||void 0===s?void 0:s.message})]})}),Object(Q.jsx)(Ze.a,{lg:6,children:Object(Q.jsxs)(l.a.Group,{className:"mb-3",controlId:"formBasicUsername",children:[Object(Q.jsx)(l.a.Label,{children:"Registration No"}),Object(Q.jsx)(l.a.Control,Object(o.a)({type:"text",defaultValue:null===f||void 0===f?void 0:f.store_registration_no},D("store_registration_no"))),Object(Q.jsx)(Z,{error:null===(u=k.store_registration_no)||void 0===u?void 0:u.message})]})}),Object(Q.jsx)(Ze.a,{lg:6,children:Object(Q.jsxs)(l.a.Group,{children:[Object(Q.jsxs)(l.a.Label,{children:["Store License ",Object(Q.jsx)("span",{className:"text-danger",children:"*"})," "]}),Object(Q.jsxs)(l.a.Group,{children:[Object(Q.jsx)(l.a.Check,Object(o.a)({inline:!0,label:"Retail Drug License",type:"radio",value:0,defaultChecked:0===(null===f||void 0===f?void 0:f.store_license)},D("store_license"))),Object(Q.jsx)(l.a.Check,Object(o.a)({inline:!0,label:"Wholesale Drug License",type:"radio",value:1,defaultChecked:1===(null===f||void 0===f?void 0:f.store_license)},D("store_license")))]}),Object(Q.jsx)(Z,{error:null===(p=k.store_license)||void 0===p?void 0:p.message})]})}),Object(Q.jsx)(Ze.a,{lg:6,children:Object(Q.jsxs)(l.a.Group,{className:"mb-3",children:[Object(Q.jsxs)(l.a.Label,{children:["Store Type ",Object(Q.jsx)("span",{className:"text-danger",children:"*"})," "]}),Object(Q.jsxs)(l.a.Select,Object(o.a)(Object(o.a)({"aria-label":"Default select example",defaultValue:null===f||void 0===f?void 0:f.store_type_id},D("store_type_id")),{},{children:[Object(Q.jsx)("option",{value:"",children:"Select Store Type..."}),null===S||void 0===S?void 0:S.map((function(e){return Object(Q.jsx)("option",{value:e.id,children:e.type_name},e.id)}))]})),Object(Q.jsx)(Z,{error:null===(x=k.store_type_id)||void 0===x?void 0:x.message})]})}),Object(Q.jsx)(Ze.a,{lg:6,children:Object(Q.jsxs)(l.a.Group,{className:"mb-3",children:[Object(Q.jsxs)(l.a.Label,{children:["Address 1 ",Object(Q.jsx)("span",{className:"text-danger",children:"*"})," "]}),Object(Q.jsx)(l.a.Control,Object(o.a)({as:"textarea",rows:3,defaultValue:null===f||void 0===f?void 0:f.address_1},D("address_1"))),Object(Q.jsx)(Z,{error:null===(h=k.address_1)||void 0===h?void 0:h.message})]})}),Object(Q.jsx)(Ze.a,{lg:6,children:Object(Q.jsxs)(l.a.Group,{className:"mb-3",children:[Object(Q.jsx)(l.a.Label,{children:"Address 2"}),Object(Q.jsx)(l.a.Control,Object(o.a)({as:"textarea",rows:3,defaultValue:null===f||void 0===f?void 0:f.address_2},D("address_2")))]})})]}),Object(Q.jsx)(rt,{href:"/stores"})]})]})})),dt=r(6),lt=["component"],ut=function(e){var t=e.component,r=Object(dt.a)(e,lt),n=Object(Y.c)((function(e){return e.authReducer}))||{},a=n.loading,c=n.isAuthenticated;return Object(Q.jsx)(i.b,Object(o.a)(Object(o.a)({},r),{},{render:function(e){return a?Object(Q.jsx)("div",{className:"fs-loader",children:Object(Q.jsx)(ke,{})}):c?Object(Q.jsx)(t,Object(o.a)({},e)):Object(Q.jsx)(i.a,{to:{pathname:"/",authenticated:!1}})}}))},jt=function(){var e=Object(Y.b)();return Object(n.useEffect)((function(){e(function(){var e=Object(m.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.get("store/auth-check/");case 3:t({type:x}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),e.t0&&t({type:h});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()),window.addEventListener("storage",(function(){q()||e({type:h})}))}),[e]),Object(Q.jsx)(s.a,{children:Object(Q.jsxs)(i.d,{children:[Object(Q.jsx)(i.b,{path:"/",component:se,exact:!0}),Object(Q.jsx)(ut,{path:"/stores",component:it}),Object(Q.jsx)(ut,{path:"/add-store",component:ot}),Object(Q.jsx)(ut,{path:"/medicines",component:Je}),Object(Q.jsx)(ut,{path:"/add-medicine",component:nt})]})})},bt=(r(304),r(62)),pt={isAuthenticated:!1,loading:!0},Ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return{isAuthenticated:!0,loading:!1};case h:case v:return Object(o.a)(Object(o.a)({},e),{},{user:null,isAuthenticated:!1,loading:!1});default:return e}},mt=r(12),xt={stores:[],loading:!0,storeTypes:[]},ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(o.a)(Object(o.a)({},e),{},{stores:t.payload,loading:!1});case g:return Object(o.a)(Object(o.a)({},e),{},{loading:!1});case y:return Object(o.a)(Object(o.a)({},e),{},{storeTypes:t.payload,loading:!1});case _:return Object(o.a)(Object(o.a)({},e),{},{loading:!1});case E:return Object(o.a)(Object(o.a)({},e),{},{stores:[].concat(Object(mt.a)(e.stores),[t.payload])});case N:return Object(o.a)(Object(o.a)({},e),{},{stores:e.stores.map((function(e){return e.id===t.payload.id?t.payload:e}))});case S:return Object(o.a)(Object(o.a)({},e),{},{stores:e.stores.filter((function(e){return e.id!==t.payload.id}))});case R:return Object(o.a)(Object(o.a)({},e),{},{stores:t.payload});default:return e}},vt={meds:[],loading:!0,medTypes:[]},ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(o.a)(Object(o.a)({},e),{},{meds:t.payload,loading:!1});case T:return Object(o.a)(Object(o.a)({},e),{},{loading:!1});case D:return Object(o.a)(Object(o.a)({},e),{},{medTypes:t.payload,loading:!1});case M:return Object(o.a)(Object(o.a)({},e),{},{loading:!1});case C:return Object(o.a)(Object(o.a)({},e),{},{meds:[].concat(Object(mt.a)(e.meds),[t.payload])});case A:return Object(o.a)(Object(o.a)({},e),{},{meds:e.meds.map((function(e){return e.id===t.payload.id?t.payload:e}))});case k:return Object(o.a)(Object(o.a)({},e),{},{meds:e.meds.filter((function(e){return e.id!==t.payload.id}))});case L:return Object(o.a)(Object(o.a)({},e),{},{meds:t.payload});default:return e}},gt=[],yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return[].concat(Object(mt.a)(e),[t.payload]);case U:return e.filter((function(e){return e.id!==t.payload}));default:return e}},_t=Object(bt.combineReducers)({authReducer:Ot,storeReducer:ht,medReducer:ft,alertReducer:yt}),Et=r(170),St=r(171),Rt=Object(St.composeWithDevTools)(Object(bt.applyMiddleware)(Et.a)),Nt=Object(bt.createStore)(_t,Rt);c.a.render(Object(Q.jsx)(Y.a,{store:Nt,children:Object(Q.jsx)(jt,{})}),document.getElementById("root"))}},[[305,1,2]]]);
//# sourceMappingURL=main.5d901194.chunk.js.map